---
// Cusdis comment section component
import { SITE } from "src/alkaline.config";

export interface Props {
    pageId: string;
    pageUrl: string;
    pageTitle: string;
}

const { pageId, pageUrl, pageTitle } = Astro.props;
const appId = SITE.cusdisAppId;
---
{appId ? (
    <>
        <div id="cusdis_thread"
            data-host="https://cusdis.com"
            data-app-id={appId}
            data-page-id={pageId}
            data-page-url={pageUrl}
            data-page-title={pageTitle}
        ></div>
        <script async defer src="https://cusdis.com/js/widget/cusdis.es.js"></script>
    </>
) : (
    <div class="cusdis-placeholder" style="text-align: center; padding: 2rem; border: 1px dashed; border-radius: 0.5rem; margin-top: 2rem;">
        <p>La sección de comentarios no está disponible.</p>
        <p>Para habilitar los comentarios, añade tu App ID de Cusdis en <code>src/alkaline.config.ts</code>.</p>
    </div>
)}