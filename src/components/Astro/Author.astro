---
/* Component for displaying author information with optional publication date and social links.
 *
 * Props:
 * - authorId: number - Unique identifier for the author from AUTHORS config
 * - pubDateTime: Date | null - Publication date/time (optional)
 * - class: string | undefined - Optional CSS classes to apply
 *
 * Example usage:
 * <Author
 *   authorId={1}
 *   pubDateTime={new Date("2024-03-20")}
 *   class="my-custom-class"
 * />
 *
 * Notes:
 * - Looks up author details from AUTHORS configuration array
 * - Displays author name, formatted publication date if provided
 * - Renders social media links through SocialsCloud component
 * - Uses theme-primary color and monospace font by default
 * - Supports custom styling through class prop
 */

import type { Author } from "../../Types/types";

import { AUTHORS, SITE } from "src/alkaline.config";
import SocialsCloud from "@components/Astro/SocialsCloud.astro";

interface Props {
  // Unique identifier for the author from AUTHORS config //
  authorId: number;
  // Publication date/time (optional) //
  pubDateTime: Date | null;
  // Optional CSS classes //
  class?: string | undefined;
}

const { authorId, pubDateTime = null, class: className } = Astro.props;
const displayDate = pubDateTime
  ? new Date(pubDateTime.getTime() + pubDateTime.getTimezoneOffset() * 60000)
  : null; // Adjust for local timezone
---

<div class:list={["text-theme-primary font-mono -mt-0.5 ml-0 p-0", className]}>
  <span>
    {AUTHORS.find((author) => author.id === authorId)?.name}
    <div class="text-sm font-normal -mt-0.5 -mb-3">
      {displayDate ? `- ${displayDate.toLocaleDateString(SITE.locale, { year: 'numeric', month: 'long', day: 'numeric' })}  ` : ""}
    </div>
  </span>
  <div class="m-0">
    <SocialsCloud
      socials={AUTHORS.find((author) => author.id === authorId)?.socials || []}
      size={18}
      class:list={["ml-0 mt-3"]}
    />
  </div>
</div>
